/* Copyright (c) 2012 Jeremiah Goyette */
function roundNumber(a,b){var c=Math.round(a*Math.pow(10,b))/Math.pow(10,b);return c}var setGraph=function(a){function h(a){var c=Math.cos(a/b.m*2*Math.PI),f=Math.sin(a/b.m*2*Math.PI);return{x:d*f+d+e,y:-1*d*c+d+e}}function i(a){while(a>=b.m)a-=b.m;while(a<0)a+=b.m;return roundNumber(a,2)}function j(){for(var a=b.pcs.length-1;a>=0;a--){var c=h(b.pcs[a]);g[a].attr({cx:c.x,cy:c.y})}}var b=this;b.m=12,b.pcs=[],b.fixedpcs=[];var c,d=180,e=30,f=2*(d+e),g=[];return b.configure=function(a){d=a.radius||d,e=a.padding||e,f=2*(d+e)},b.plotpcs=function(){c&&(clear(c),g=[]),c=new Raphael(document.getElementById(a),f,f);var i=c.circle(d+e,d+e,d);i.attr({"stroke-width":4});for(var j=0;j<b.m;j++){var k=h(j),l=c.circle(k.x,k.y,5);l.attr({fill:"white"})}for(var j=b.pcs.length-1;j>=0;j--){var k=h(b.pcs[j]),l=c.circle(k.x,k.y,7);l.attr({fill:"black"}),g.unshift(l)}for(var j=b.fixedpcs.length-1;j>=0;j--){var k=h(b.fixedpcs[j]),l=c.circle(k.x,k.y,7);l.attr({fill:"black"})}},b.transpose=function(a,c){for(var d=g.length-1;d>=0;d--)b.pcs[d]=i(b.pcs[d]+a);j(),c&&typeof c=="function"&&c()},b.animTranspose=function(a,c){function h(){var k=a*d/e;for(var l=g.length-1;l>=0;l--)b.pcs[l]=i(f[l]+k);j(),c&&typeof c=="function"&&c(),d<e&&setTimeout(function(){h()},10),d++}var d=0,e=40,f=b.pcs.slice(0);h()},b.invert=function(a,c){for(var d=g.length-1;d>=0;d--)b.pcs[d]=i(a-b.pcs[d]);j(),c&&typeof c=="function"&&c()},b.animInvert=function(a,c){function k(){var l=d/e;for(var n=g.length-1;n>=0;n--){var o=i(a-2*f[n]);o>m/2&&(o-=m),b.pcs[n]=i(f[n]+l*o);var p=h(b.pcs[n]);g[n].attr({cx:p.x,cy:p.y})}j(),c&&typeof c=="function"&&c(),d<e&&setTimeout(function(){k()},10),d++}var d=0,e=40,f=b.pcs.slice(0);k()},b.animInvertDirect=function(a,c){function m(){var a=d/e;for(var b=g.length-1;b>=0;b--){var f=j[b].x+a*(k[b].x-j[b].x),h=j[b].y+a*(k[b].y-j[b].y);g[b].attr({cx:f,cy:h})}d<e?setTimeout(function(){m()},10):c&&typeof c=="function"&&c(),d++}var d=0,e=40,f=b.pcs.slice(0),j=[],k=[];for(var l=pcs.length-1;l>=0;l--)pcs[l]=i(a-pcs[l]),j.unshift(h(f[l])),k.unshift(h(b.pcs[l]));m()},b.clear=function(){if(!c)return;var a=c.canvas;a.parentNode.removeChild(a)},b}