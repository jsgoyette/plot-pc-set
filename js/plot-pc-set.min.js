/* Copyright (c) 2012 Jeremiah Goyette */
function roundNumber(a,b){var c=Math.round(a*Math.pow(10,b))/Math.pow(10,b);return c}var setGraph=function(a){function l(a){var c=Math.cos(a/b.m*2*Math.PI),f=Math.sin(a/b.m*2*Math.PI);return{x:d*f+d+e,y:-1*d*c+d+e}}function m(a){while(a>=b.m)a-=b.m;while(a<0)a+=b.m;return roundNumber(a,2)}function n(a){var c=0;for(var d=b.pcs.length-1;d>=0;d--)a!=d&&b.pcs[a]==b.pcs[d]&&c++;return(1+c*i)*g}function o(){for(var a=b.pcs.length-1;a>=0;a--){if(a>=b.fix){var c=l(b.pcs[a]);k[a].attr({cx:c.x,cy:c.y})}k[a].attr({r:n(a)})}}var b=this;b.m=12,b.pcs=[],b.fix=0;var c,d=180,e=30,f=2*(d+e),g=7,h=5,i=.5,j=!1,k=[];return b.configure=function(a){d=a.radius||d,e=a.padding||e,h=a.ticksize||h,g=a.dotsize||g,i=a.dotsizeinc||i,f=2*(d+e)},b.plotpcs=function(){c&&(clear(c),k=[]),c=new Raphael(document.getElementById(a),f,f);var g=c.circle(d+e,d+e,d);g.attr({"stroke-width":4});for(var i=0;i<b.m;i++){var j=l(i),m=c.circle(j.x,j.y,h);m.attr({fill:"white"})}for(var i=b.pcs.length-1;i>=0;i--){var j=l(b.pcs[i]),m=c.circle(j.x,j.y,n(i));m.attr({fill:"black"}),k.unshift(m)}},b.transpose=function(a,c){for(var d=k.length-1;d>=0;d--)b.pcs[d]=m(b.pcs[d]+a);o(),c&&typeof c=="function"&&c()},b.animTranspose=function(a,c){function g(){var h=a*d/e;for(var i=k.length-1;i>=b.fix;i--)b.pcs[i]=m(f[i]+h);o(),c&&typeof c=="function"&&c(),d<e?setTimeout(function(){g()},10):j=!1,d++}if(j)return;j=!0;var d=0,e=40,f=b.pcs.slice(0);g()},b.invert=function(a,c){for(var d=k.length-1;d>=b.fix;d--)b.pcs[d]=m(a-b.pcs[d]);o(),c&&typeof c=="function"&&c()},b.animInvert=function(a,c){function g(){var h=d/e;for(var i=k.length-1;i>=b.fix;i--){var n=m(a-2*f[i]);n>b.m/2&&(n-=b.m),b.pcs[i]=m(f[i]+h*n);var p=l(b.pcs[i]);k[i].attr({cx:p.x,cy:p.y})}o(),c&&typeof c=="function"&&c(),d<e?setTimeout(function(){g()},10):j=!1,d++}if(j)return;j=!0;var d=0,e=40,f=b.pcs.slice(0);g()},b.animInvertDirect=function(a,c){function o(){var i=d/e;for(var l=k.length-1;l>=0;l--){if(l>=b.fix){var p=g[l].x+i*(h[l].x-g[l].x),q=g[l].y+i*(h[l].y-g[l].y);k[l].attr({cx:p,cy:q})}k[l].attr({r:n(l)})}if(d<e)setTimeout(function(){o()},10);else{for(var l=b.pcs.length-1;l>=0;l--)l>=b.fix&&(b.pcs[l]=m(a-f[l])),k[l].attr({r:n(l)});c&&typeof c=="function"&&c(),j=!1}d++}if(j)return;j=!0;var d=0,e=40,f=b.pcs.slice(0),g=[],h=[];for(var i=b.pcs.length-1;i>=0;i--)i>=b.fix?(g.unshift(l(b.pcs[i])),h.unshift(l(m(a-b.pcs[i]))),b.pcs[i]!=a-b.pcs[i]&&(b.pcs[i]=Math.random()*1001)):(g.unshift(0),h.unshift(0)),k[i].attr({r:n(i)});o()},b.clear=function(){if(!c)return;var a=c.canvas;a.parentNode.removeChild(a)},b}