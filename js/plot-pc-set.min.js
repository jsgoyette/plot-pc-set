/* Copyright (c) 2012 Jeremiah Goyette */
var setGraph=function(b){function c(a,b){var c=Math.round(a*Math.pow(10,b))/Math.pow(10,b);return c}function o(a){while(a>=d.m)a-=d.m;while(a<0)a+=d.m;return c(a,2)}function p(a){var b=Math.cos(a/d.m*2*Math.PI),c=Math.sin(a/d.m*2*Math.PI);return{x:g*c+g+h,y:-1*g*b+g+h}}function q(a){var b,c=-1;for(b=n.length-1;b>=0;b--)n[b].pc==a&&c++;return c<1&&(c=0),(1+c*l)*k}function r(){for(var a=n.length-1;a>=0;a--){if(!n[a].fixed){var b=p(n[a].pc);n[a].dot.attr({cx:b.x,cy:b.y})}n[a].dot.attr({r:q(n[a].pc)})}}"use strict";var d={},e,f=!1,g=180,h=30,i=2*(g+h),j=5,k=8,l=.5,m=function(){return!1};d.m=12;var n=[],s=function(a,b){this.pc=a||0,this.fixed=b||!1;var c=p(a);this.dot=e.circle(c.x,c.y,q(a)),this.dot.attr({fill:"black"}),this.dot.click(m)};return d.configure=function(a){g=a.radius||g,h=a.padding||h,i=2*(g+h),j=a.ticksize||j,k=a.dotsize||k,l=a.dotsizeinc||l,m=a.dotclick&&typeof a.dotclick=="function"?a.dotclick:m},d.plotpcs=function(a,c){e&&(d.clear(e),n=[]),e=new Raphael(document.getElementById(b),i,i);var f=e.circle(g+h,g+h,g);f.attr({"stroke-width":4});for(var k=0;k<d.m;k++){var l=p(k),m=e.circle(l.x,l.y,j);m.attr({fill:"white"})}if(a)for(var k=a.length-1;k>=0;k--){c=c||0;var o=k>=c?!1:!0,q=new s(a[k],o);n.unshift(q)}r()},d.getpcs=function(){var a=[];for(var b=n.length-1;b>=0;b--)a.unshift(n[b].pc);return a},d.transpose=function(a,b){for(var c=n.length-1;c>=0;c--)n[c].fixed||(n[c].pc=o(n[c].pc+a));r(),b&&typeof b=="function"&&b()},d.animTranspose=function(a,b){function h(){var d=a*c/e;for(var i=n.length-1;i>=0;i--)n[i].fixed||(n[i].pc=o(g[i]+d));r(),b&&typeof b=="function"&&b(),c<e?setTimeout(function(){h()},10):f=!1,c++}if(f)return;f=!0;var c=0,e=40,g=d.getpcs();h()},d.invert=function(a,b){for(var c=n.length-1;c>=0;c--)n[c].fixed||(n[c].pc=o(a-n[c].pc));r(),b&&typeof b=="function"&&b()},d.animInvert=function(a,b){function h(){var i=c/e;for(var j=n.length-1;j>=0;j--){if(!n[j].fixed){var k=o(a-2*g[j]);k>d.m/2&&(k-=d.m),n[j].pc=o(g[j]+i*k);var l=p(n[j].pc);n[j].dot.attr({cx:l.x,cy:l.y})}n[j].dot.attr({r:q(n[j].pc)})}b&&typeof b=="function"&&b(),c<e?setTimeout(function(){h()},10):f=!1,c++}if(f)return;f=!0;var c=0,e=40,g=d.getpcs();h()},d.animInvertDirect=function(a,b){function m(){var h=c/d;for(var i=n.length-1;i>=0;i--)if(!n[i].fixed){var j=e[i].x+h*(g[i].x-e[i].x),k=e[i].y+h*(g[i].y-e[i].y);n[i].dot.attr({cx:j,cy:k})}if(c<d)setTimeout(function(){m()},10);else{for(var i=n.length-1;i>=0;i--)n[i].fixed||(n[i].pc=o(a-n[i].pc));for(var i=n.length-1;i>=0;i--)n[i].dot.attr({r:q(n[i].pc)});b&&typeof b=="function"&&b(),f=!1}c++}if(f)return;f=!0;var c=0,d=40,e=[],g=[];for(var h=n.length-1;h>=0;h--){var i=0;n[h].fixed?(e.unshift(0),g.unshift(0)):(e.unshift(p(n[h].pc)),g.unshift(p(o(a-n[h].pc))));for(var j=n.length-1;j>=0;j--)h!=j&&n[h].pc==n[j].pc&&n[h].fixed==n[j].fixed&&i++;n[h].dot.attr({r:(1+i*l)*k})}m()},d.clear=function(){if(!e)return;var a=e.canvas;a.parentNode.removeChild(a)},d}
