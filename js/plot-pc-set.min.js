(function(t,n){"use strict";function r(t,n){return Math.round(t*Math.pow(10,n))/Math.pow(10,n)}n.setGraph=function(c){function o(t){for(;t>=l;)t-=l;for(;0>t;)t+=l;return r(t,2)}function i(t){var n=Math.cos(2*(t/l)*Math.PI),r=Math.sin(2*(t/l)*Math.PI);return{x:Math.floor(d*r+d+s),y:Math.floor(-1*d*n+d+s)}}function f(){var t,n,r,c=Array(h.length);for(t=h.length-1;t>=0;t--){for(r=0,n=h.length-1;n>=0;n--){if(n>t&&h[t].pc==h[n].pc){c[t]=c[n];break}h[t].pc==h[n].pc&&r++}c[t]=c[t]||Math.sqrt(r)*g}return c}function e(){var t,n=f();for(t=h.length-1;t>=0;t--){var r=i(h[t].pc);h[t].dot.attr({cx:r.x,cy:r.y}),h[t].dot.attr({r:n[t]})}}var a={},u=null,p=!1,h=[],l=12,d=180,s=30,v=2*(d+s),x=5,g=8,y=50,M=15,m=function(){return!1},k=function(t,n){t=t||0,n=n||!1;var r=i(t),c=u.circle(r.x,r.y,g);return c.attr({fill:"black"}),c.click(m),{pc:t,fixed:n,dot:c}};return a.configure=function(t){l=t.mod||l,d=t.radius||d,s=t.padding||s,v=2*(d+s),x=t.ticksize||x,g=t.dotsize||g,m=t.dotclick&&"function"==typeof t.dotclick?t.dotclick:m},a.plotpcs=function(n,r){u&&(a.clear(u),h=[]),n=n||[],r=r||0,u=new Raphael(t.getElementById(c),v,v);var o,f=u.circle(d+s,d+s,d);for(f.attr({"stroke-width":4}),o=0;l>o;o++){var p=i(o),g=u.circle(p.x,p.y,x);g.attr({fill:"white"})}for(o=n.length-1;o>=0;o--){var y=o>=r?!1:!0,M=k(n[o],y);h.unshift(M)}e()},a.getpcs=function(){var t,n=[];for(t=h.length-1;t>=0;t--)n.unshift(h[t].pc);return n},a.transpose=function(t,n){for(var r=h.length-1;r>=0;r--)h[r].fixed||(h[r].pc=o(h[r].pc+t));e(),n&&"function"==typeof n&&n()},a.animTranspose=function(t,r,c){if(!p){p=!0;var i,f,u=0,l=a.getpcs();(function d(){for(f=t*u/y,i=h.length-1;i>=0;i--)h[i].fixed||(h[i].pc=o(l[i]+f));e(),r&&"function"==typeof r&&r(),y>u?n.setTimeout(function(){d()},M):(p=!1,c&&"function"==typeof c&&c()),u++})()}},a.invert=function(t,n){for(var r=h.length-1;r>=0;r--)h[r].fixed||(h[r].pc=o(t-h[r].pc));e(),n&&"function"==typeof n&&n()},a.animInvert=function(t,r,c){if(!p){p=!0;var e=0,u=a.getpcs();(function d(){var a,s,v,x,g=e/y;for(a=h.length-1;a>=0;a--)h[a].fixed||(x=o(t-2*u[a]),x>l/2&&(x-=l),h[a].pc=o(u[a]+g*x),s=i(h[a].pc),h[a].dot.attr({cx:s.x,cy:s.y}));for(v=f(),a=h.length-1;a>=0;a--)h[a].dot.attr({r:v[a]});r&&"function"==typeof r&&r(),y>e?n.setTimeout(function(){d()},M):(p=!1,c&&"function"==typeof c&&c()),e++})()}},a.animDirect=function(t,r,c){if(!p){p=!0;var e,a,u,l=0,d=[],s=[];for(e=h.length-1;e>=0;e--){for(u=0,h[e].fixed?(d.unshift(0),s.unshift(0)):(d.unshift(i(h[e].pc)),"invert"==t?s.unshift(i(o(r-h[e].pc))):s.unshift(i(o(r+h[e].pc)))),a=h.length-1;a>=0;a--)h[e].pc==h[a].pc&&(h[e].fixed==h[a].fixed||"invert"==t&&(h[e].fixed===!1&&h[e].pc==o(r-h[e].pc)||h[a].fixed===!1&&h[a].pc==o(r-h[a].pc)))&&u++;h[e].dot.attr({r:Math.sqrt(u)*g})}(function v(){var i,e,a,u=l/y;for(i=h.length-1;i>=0;i--)h[i].fixed||(e=d[i].x+u*(s[i].x-d[i].x),a=d[i].y+u*(s[i].y-d[i].y),h[i].dot.attr({cx:e,cy:a}));if(y>l)n.setTimeout(function(){v()},M);else{var x;for(i=h.length-1;i>=0;i--)h[i].fixed||(e="invert"==t?o(r-h[i].pc):o(r+h[i].pc),h[i].pc=e);for(x=f(),i=h.length-1;i>=0;i--)h[i].dot.attr({r:x[i]});c&&"function"==typeof c&&c(),p=!1}l++})()}},a.clear=function(){if(u){var t=u.canvas;t.parentNode.removeChild(t)}},a}})(document,window);