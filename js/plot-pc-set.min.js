/* Copyright (c) 2012 Jeremiah Goyette */
var setGraph=function(a){function b(a,b){var c=Math.round(a*Math.pow(10,b))/Math.pow(10,b);return c}function n(a){while(a>=c.m)a-=c.m;while(a<0)a+=c.m;return b(a,2)}function o(a){var b=Math.cos(a/c.m*2*Math.PI),d=Math.sin(a/c.m*2*Math.PI);return{x:f*d+f+g,y:-1*f*b+f+g}}function p(a){var b,c=-1;for(b=m.length-1;b>=0;b--)m[b].pc==a&&c++;return c<1&&(c=0),(1+c*k)*j}function q(){for(var a=m.length-1;a>=0;a--){if(!m[a].fixed){var b=o(m[a].pc);m[a].dot.attr({cx:b.x,cy:b.y})}m[a].dot.attr({r:p(m[a].pc)})}}"use strict";var c={},d,e=!1,f=180,g=30,h=2*(f+g),i=5,j=8,k=.5,l=function(){return!1};c.m=12;var m=[],r=function(a,b){this.pc=a||0,this.fixed=b||!1;var c=o(a);this.dot=d.circle(c.x,c.y,p(a)),this.dot.attr({fill:"black"}),this.dot.click(l)};return c.configure=function(a){f=a.radius||f,g=a.padding||g,h=2*(f+g),i=a.ticksize||i,j=a.dotsize||j,k=a.dotsizeinc||k,l=a.dotclick&&typeof a.dotclick=="function"?a.dotclick:l},c.plotpcs=function(b,e){d&&(c.clear(d),m=[]),d=new Raphael(document.getElementById(a),h,h);var j=d.circle(f+g,f+g,f);j.attr({"stroke-width":4});for(var k=0;k<c.m;k++){var l=o(k),n=d.circle(l.x,l.y,i);n.attr({fill:"white"})}if(b)for(var k=b.length-1;k>=0;k--){e=e||0;var p=k>=e?!1:!0,s=new r(b[k],p);m.unshift(s)}q()},c.getpcs=function(){var a=[];for(var b=m.length-1;b>=0;b--)a.unshift(m[b].pc);return a},c.transpose=function(a,b){for(var c=m.length-1;c>=0;c--)m[c].fixed||(m[c].pc=n(m[c].pc+a));q(),b&&typeof b=="function"&&b()},c.animTranspose=function(a,b){function h(){var c=a*d/f;for(var i=m.length-1;i>=0;i--)m[i].fixed||(m[i].pc=n(g[i]+c));q(),b&&typeof b=="function"&&b(),d<f?setTimeout(function(){h()},10):e=!1,d++}if(e)return;e=!0;var d=0,f=40,g=c.getpcs();h()},c.invert=function(a,b){for(var c=m.length-1;c>=0;c--)m[c].fixed||(m[c].pc=n(a-m[c].pc));q(),b&&typeof b=="function"&&b()},c.animInvert=function(a,b){function h(){var i=d/f;for(var j=m.length-1;j>=0;j--){if(!m[j].fixed){var k=n(a-2*g[j]);k>c.m/2&&(k-=c.m),m[j].pc=n(g[j]+i*k);var l=o(m[j].pc);m[j].dot.attr({cx:l.x,cy:l.y})}m[j].dot.attr({r:p(m[j].pc)})}b&&typeof b=="function"&&b(),d<f?setTimeout(function(){h()},10):e=!1,d++}if(e)return;e=!0;var d=0,f=40,g=c.getpcs();h()},c.animInvertDirect=function(a,b){function q(){var h=c/d;for(var i=m.length-1;i>=0;i--)if(!m[i].fixed){var j=f[i].x+h*(g[i].x-f[i].x),k=f[i].y+h*(g[i].y-f[i].y);m[i].dot.attr({cx:j,cy:k})}if(c<d)setTimeout(function(){q()},10);else{for(var i=m.length-1;i>=0;i--)m[i].fixed||(m[i].pc=n(a-m[i].pc));for(var i=m.length-1;i>=0;i--)m[i].dot.attr({r:p(m[i].pc)});b&&typeof b=="function"&&b(),e=!1}c++}if(e)return;e=!0;var c=0,d=40,f=[],g=[];for(var h=m.length-1;h>=0;h--){m[h].fixed?(f.unshift(0),g.unshift(0)):(f.unshift(o(m[h].pc)),g.unshift(o(n(a-m[h].pc))));var i=0;for(var l=m.length-1;l>=0;l--)h!=l&&m[h].pc==m[l].pc&&m[h].fixed==m[l].fixed&&i++;m[h].dot.attr({r:(1+i*k)*j})}q()},c.clear=function(){if(!d)return;var a=d.canvas;a.parentNode.removeChild(a)},c}